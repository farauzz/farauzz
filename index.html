<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Himoyalangan Ilova</title>
    <style>
        /* Dizayn qismi */
        body { font-family: 'Segoe UI', sans-serif; background: #1a1a2e; color: white; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; overflow: hidden; }
        #lock-screen { text-align: center; width: 100%; max-width: 300px; }
        .dots { display: flex; justify-content: center; gap: 15px; margin: 30px 0; }
        .dot { width: 15px; height: 15px; border: 2px solid #4e4e6a; border-radius: 50%; transition: 0.3s; }
        .dot.active { background: #00d2ff; border-color: #00d2ff; box-shadow: 0 0 10px #00d2ff; }
        .keypad { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; padding: 10px; }
        button { background: rgba(255,255,255,0.1); border: none; color: white; font-size: 24px; padding: 20px; border-radius: 50%; cursor: pointer; transition: 0.2s; }
        button:active { background: rgba(255,255,255,0.3); transform: scale(0.9); }
        .error { color: #ff4d4d; margin-top: 10px; font-weight: bold; min-height: 20px; }
        #main-content { display: none; padding: 20px; text-align: center; }
    </style>
</head>
<body>

<div id="lock-screen">
    <h2 id="header-text">Pin-kodni kiriting</h2>
    <div class="dots" id="dots">
        <div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div>
    </div>
    <div class="keypad">
        <button onclick="addNum('1')">1</button><button onclick="addNum('2')">2</button><button onclick="addNum('3')">3</button>
        <button onclick="addNum('4')">4</button><button onclick="addNum('5')">5</button><button onclick="addNum('6')">6</button>
        <button onclick="addNum('7')">7</button><button onclick="addNum('8')">8</button><button onclick="addNum('9')">9</button>
        <button onclick="clearAll()" style="font-size: 16px;">C</button>
        <button onclick="addNum('0')">0</button>
        <button onclick="deleteLast()" style="font-size: 16px;">⌫</button>
    </div>
    <div id="error-msg" class="error"></div>
</div>

<div id="main-content">
    <h1>Muvaffaqiyatli kirdingiz! ✅</h1>
    <p>Sizning Web2App ilovangiz endi himoyalangan.</p>
    <button onclick="resetPin()" style="border-radius: 10px; font-size: 16px;">Parolni o'chirish</button>
</div>

<script>
    let inputPin = "";
    // Agar birinchi marta kirayotgan bo'lsa '0000', aks holda saqlangan parol
    let correctPin = localStorage.getItem("my_app_password") || "0000";

    function updateUI() {
        const dots = document.querySelectorAll('.dot');
        dots.forEach((dot, i) => {
            dot.classList.toggle('active', i < inputPin.length);
        });
    }

    function addNum(num) {
        if (inputPin.length < 4) {
            inputPin += num;
            updateUI();
        }
        if (inputPin.length === 4) {
            setTimeout(checkPin, 200);
        }
    }

    function checkPin() {
        if (inputPin === correctPin) {
            document.getElementById('lock-screen').style.display = 'none';
            document.getElementById('main-content').style.display = 'block';
        } else {
            document.getElementById('error-msg').innerText = "Xato! Qaytadan urinib ko'ring";
            inputPin = "";
            updateUI();
            setTimeout(() => { document.getElementById('error-msg').innerText = ""; }, 1500);
        }
    }

    function deleteLast() {
        inputPin = inputPin.slice(0, -1);
        updateUI();
    }

    function clearAll() {
        inputPin = "";
        updateUI();
    }

    function resetPin() {
        localStorage.removeItem("my_app_password");
        location.reload();
    }
</script>

</body>
</html>
